from pydantic import BaseModel, Field, computed_field, field_validator, model_validator


from almanac.data_models.types import *

class SourceMetadata(BaseModel):

    # Identifiers
    sdss_id: Int64 = Field(default=-1)
    catalogid: Int64 = Field(default=-1)
    version_id: int = Field(default=-1)
    lead: str = Field(default="")
    allstar_dr17_synspec_rev1: bool = Field(default=False)
    allwise: bool = Field(default=False)
    bhm_rm_v0: bool = Field(default=False)
    bhm_rm_v0_2: bool = Field(default=False)
    catwise: bool = Field(default=False)
    catwise2020: bool = Field(default=False)
    gaia_dr2_source: Int64 = Field(default=False)
    gaia_dr3_source: Int64 = Field(default=False)
    glimpse: bool = Field(default=False)
    guvcat: bool = Field(default=False)
    legacy_survey_dr10: bool = Field(default=False)
    legacy_survey_dr8: bool = Field(default=False)
    mangatarget: bool = Field(default=False)
    marvels_dr11_star: bool = Field(default=False)
    marvels_dr12_star: bool = Field(default=False)
    mastar_goodstars: bool = Field(default=False)
    panstarrs1: bool = Field(default=False)
    ps1_g18: bool = Field(default=False)
    sdss_dr13_photoobj: bool = Field(default=False)
    sdss_dr17_specobj: bool = Field(default=False)
    skymapper_dr1_1: bool = Field(default=False)
    skymapper_dr2: bool = Field(default=False)
    supercosmos: bool = Field(default=False)
    tic_v8: bool = Field(default=False)
    twomass_psc: bool = Field(default=False)
    tycho2: bool = Field(default=False)
    unwise: bool = Field(default=False)

    # Gaia
    source_id: int = Field(default=-1)
    solution_id: int = Field(default=-1)
    designation: str = Field(default="")
    random_index: float = Field(default=float('nan'))
    ref_epoch: float = Field(default=float('nan'))
    ra: float = Field(default=float('nan'))
    ra_error: float = Field(default=float('nan'))
    dec: float = Field(default=float('nan'))
    dec_error: float = Field(default=float('nan'))
    parallax: float = Field(default=float('nan'))
    parallax_error: float = Field(default=float('nan'))
    parallax_over_error: float = Field(default=float('nan'))
    pm: float = Field(default=float('nan'))
    pmra: float = Field(default=float('nan'))
    pmra_error: float = Field(default=float('nan'))
    pmdec: float = Field(default=float('nan'))
    pmdec_error: float = Field(default=float('nan'))
    ra_dec_corr: float = Field(default=float('nan'))
    ra_parallax_corr: float = Field(default=float('nan'))
    ra_pmra_corr: float = Field(default=float('nan'))
    ra_pmdec_corr: float = Field(default=float('nan'))
    dec_parallax_corr: float = Field(default=float('nan'))
    dec_pmra_corr: float = Field(default=float('nan'))
    dec_pmdec_corr: float = Field(default=float('nan'))
    parallax_pmra_corr: float = Field(default=float('nan'))
    parallax_pmdec_corr: float = Field(default=float('nan'))
    pmra_pmdec_corr: float = Field(default=float('nan'))
    astrometric_n_obs_al: int = Field(default=-1)
    astrometric_n_obs_ac: int = Field(default=-1)
    astrometric_n_good_obs_al: int = Field(default=-1)
    astrometric_n_bad_obs_al: int = Field(default=-1)
    astrometric_gof_al: float = Field(default=float('nan'))
    astrometric_chi2_al: float = Field(default=float('nan'))
    astrometric_excess_noise: float = Field(default=float('nan'))
    astrometric_excess_noise_sig: float = Field(default=float('nan'))
    astrometric_params_solved: int = Field(default=-1)
    astrometric_primary_flag: bool = Field(default=False)
    nu_eff_used_in_astrometry: float = Field(default=float('nan'))
    pseudocolour: float = Field(default=float('nan'))
    pseudocolour_error: float = Field(default=float('nan'))
    ra_pseudocolour_corr: float = Field(default=float('nan'))
    dec_pseudocolour_corr: float = Field(default=float('nan'))
    parallax_pseudocolour_corr: float = Field(default=float('nan'))
    pmra_pseudocolour_corr: float = Field(default=float('nan'))
    pmdec_pseudocolour_corr: float = Field(default=float('nan'))
    astrometric_matched_transits: int = Field(default=-1)
    visibility_periods_used: int = Field(default=-1)
    astrometric_sigma5d_max: float = Field(default=float('nan'))
    matched_transits: int = Field(default=-1)
    new_matched_transits: int = Field(default=-1)
    matched_transits_removed: int = Field(default=-1)
    ipd_gof_harmonic_amplitude: float = Field(default=float('nan'))
    ipd_gof_harmonic_phase: float = Field(default=float('nan'))
    ipd_frac_multi_peak: float = Field(default=float('nan'))
    ipd_frac_odd_win: float = Field(default=float('nan'))
    ruwe: float = Field(default=float('nan'))
    scan_direction_strength_k1: float = Field(default=float('nan'))
    scan_direction_strength_k2: float = Field(default=float('nan'))
    scan_direction_strength_k3: float = Field(default=float('nan'))
    scan_direction_strength_k4: float = Field(default=float('nan'))
    scan_direction_mean_k1: float = Field(default=float('nan'))
    scan_direction_mean_k2: float = Field(default=float('nan'))
    scan_direction_mean_k3: float = Field(default=float('nan'))
    scan_direction_mean_k4: float = Field(default=float('nan'))
    duplicated_source: bool = Field(default=False)
    phot_g_n_obs: int = Field(default=-1)
    phot_g_mean_flux: float = Field(default=float('nan'))
    phot_g_mean_flux_error: float = Field(default=float('nan'))
    phot_g_mean_flux_over_error: float = Field(default=float('nan'))
    phot_g_mean_mag: float = Field(default=float('nan'))
    phot_bp_n_obs: int = Field(default=-1)
    phot_bp_mean_flux: float = Field(default=float('nan'))
    phot_bp_mean_flux_error: float = Field(default=float('nan'))
    phot_bp_mean_flux_over_error: float = Field(default=float('nan'))
    phot_bp_mean_mag: float = Field(default=float('nan'))
    phot_rp_n_obs: int = Field(default=-1)
    phot_rp_mean_flux: float = Field(default=float('nan'))
    phot_rp_mean_flux_error: float = Field(default=float('nan'))
    phot_rp_mean_flux_over_error: float = Field(default=float('nan'))
    phot_rp_mean_mag: float = Field(default=float('nan'))
    phot_bp_rp_excess_factor: float = Field(default=float('nan'))
    phot_bp_n_contaminated_transits: int = Field(default=-1)
    phot_bp_n_blended_transits: int = Field(default=-1)
    phot_rp_n_contaminated_transits: int = Field(default=-1)
    phot_rp_n_blended_transits: int = Field(default=-1)
    phot_proc_mode: int = Field(default=-1)
    bp_rp: float = Field(default=float('nan'))
    bp_g: float = Field(default=float('nan'))
    g_rp: float = Field(default=float('nan'))
    radial_velocity: float = Field(default=float('nan'))
    radial_velocity_error: float = Field(default=float('nan'))
    rv_method_used: str = Field(default="")
    rv_nb_transits: int = Field(default=-1)
    rv_nb_deblended_transits: int = Field(default=-1)
    rv_visibility_periods_used: int = Field(default=-1)
    rv_expected_sig_to_noise: float = Field(default=float('nan'))
    rv_renormalised_gof: float = Field(default=float('nan'))
    rv_chisq_pvalue: float = Field(default=float('nan'))
    rv_time_duration: float = Field(default=float('nan'))
    rv_amplitude_robust: float = Field(default=float('nan'))
    rv_template_teff: float = Field(default=float('nan'))
    rv_template_logg: float = Field(default=float('nan'))
    rv_template_fe_h: float = Field(default=float('nan'))
    rv_atm_param_origin: str = Field(default="")
    vbroad: float = Field(default=float('nan'))
    vbroad_error: float = Field(default=float('nan'))
    vbroad_nb_transits: int = Field(default=-1)
    grvs_mag: float = Field(default=float('nan'))
    grvs_mag_error: float = Field(default=float('nan'))
    grvs_mag_nb_transits: int = Field(default=-1)
    rvs_spec_sig_to_noise: float = Field(default=float('nan'))
    phot_variable_flag: str = Field(default="")
    l: float = Field(default=float('nan'))
    b: float = Field(default=float('nan'))
    ecl_lon: float = Field(default=float('nan'))
    ecl_lat: float = Field(default=float('nan'))
    in_qso_candidates: bool = Field(default=False)
    in_galaxy_candidates: bool = Field(default=False)
    non_single_star: bool = Field(default=False)
    has_xp_continuous: bool = Field(default=False)
    has_xp_sampled: bool = Field(default=False)
    has_rvs: bool = Field(default=False)
    has_epoch_photometry: bool = Field(default=False)
    has_epoch_rv: bool = Field(default=False)
    has_mcmc_gspphot: bool = Field(default=False)
    has_mcmc_msc: bool = Field(default=False)
    in_andromeda_survey: bool = Field(default=False)
    classprob_dsc_combmod_quasar: float = Field(default=float('nan'))
    classprob_dsc_combmod_galaxy: float = Field(default=float('nan'))
    classprob_dsc_combmod_star: float = Field(default=float('nan'))
    teff_gspphot: float = Field(default=float('nan'))
    teff_gspphot_lower: float = Field(default=float('nan'))
    teff_gspphot_upper: float = Field(default=float('nan'))
    logg_gspphot: float = Field(default=float('nan'))
    logg_gspphot_lower: float = Field(default=float('nan'))
    logg_gspphot_upper: float = Field(default=float('nan'))
    mh_gspphot: float = Field(default=float('nan'))
    mh_gspphot_lower: float = Field(default=float('nan'))
    mh_gspphot_upper: float = Field(default=float('nan'))
    distance_gspphot: float = Field(default=float('nan'))
    distance_gspphot_lower: float = Field(default=float('nan'))
    distance_gspphot_upper: float = Field(default=float('nan'))
    azero_gspphot: float = Field(default=float('nan'))
    azero_gspphot_lower: float = Field(default=float('nan'))
    azero_gspphot_upper: float = Field(default=float('nan'))
    ag_gspphot: float = Field(default=float('nan'))
    ag_gspphot_lower: float = Field(default=float('nan'))
    ag_gspphot_upper: float = Field(default=float('nan'))
    ebpminrp_gspphot: float = Field(default=float('nan'))
    ebpminrp_gspphot_lower: float = Field(default=float('nan'))
    ebpminrp_gspphot_upper: float = Field(default=float('nan'))
    libname_gspphot: str = Field(default="")
    j_m: float = Field(default=float('nan'))
    j_cmsig: float = Field(default=float('nan'))
    j_msigcom: float = Field(default=float('nan'))
    j_snr: float = Field(default=float('nan'))
    h_m: float = Field(default=float('nan'))
    h_cmsig: float = Field(default=float('nan'))
    h_msigcom: float = Field(default=float('nan'))
    h_snr: float = Field(default=float('nan'))
    k_m: float = Field(default=float('nan'))
    k_cmsig: float = Field(default=float('nan'))
    k_msigcom: float = Field(default=float('nan'))
    k_snr: float = Field(default=float('nan'))
    ph_qual: str = Field(default="")
    rd_flg: str = Field(default="")
    bl_flg: str = Field(default="")
    cc_flg: str = Field(default="")
    ndet: int = Field(default=-1)
    prox: float = Field(default=float('nan'))
    pxpa: float = Field(default=float('nan'))
    pxcntr: float = Field(default=float('nan'))
    gal_contam: int = Field(default=-1)
    mp_flg: str = Field(default="")
    scan: int = Field(default=-1)
    glon: float = Field(default=float('nan'))
    glat: float = Field(default=float('nan'))
    x_scan: float = Field(default=float('nan'))
    jdate: float = Field(default=float('nan'))
    j_psfchi: float = Field(default=float('nan'))
    h_psfchi: float = Field(default=float('nan'))
    k_psfchi: float = Field(default=float('nan'))
    j_m_stdap: float = Field(default=float('nan'))
    j_msig_stdap: float = Field(default=float('nan'))
    h_m_stdap: float = Field(default=float('nan'))
    h_msig_stdap: float = Field(default=float('nan'))
    k_m_stdap: float = Field(default=float('nan'))
    k_msig_stdap: float = Field(default=float('nan'))
    dist_edge_ns: float = Field(default=float('nan'))
    dist_edge_ew: float = Field(default=float('nan'))
    dist_edge_flg: int = Field(default=-1)
    dup_src: int = Field(default=-1)
    use_src: int = Field(default=-1)
    a: float = Field(default=float('nan'))
    dist_opt: float = Field(default=float('nan'))
    phi_opt: float = Field(default=float('nan'))
    b_m_opt: float = Field(default=float('nan'))
    vr_m_opt: float = Field(default=float('nan'))
    nopt_mchs: int = Field(default=-1)
    ext_key: int = Field(default=-1)
    scan_key: int = Field(default=-1)
    coadd_key: int = Field(default=-1)
    coad: int = Field(default=-1)

    class Config:
        validate_by_name = True
        validate_assignment = True
        arbitrary_types_allowed = True
